{"version":3,"sources":["script.js"],"names":["themeBtn","document","querySelector","addEventListener","userPreference","body","getAttribute","includes","setLightMode","setDarkMode","window","localStorage","setItem","loadUserPreference","getItem","loadPrefersColorScheme","matchMedia","matches","event","loadThemePreferences","classList","remove","add"],"mappings":"AAAA,aAOA,IAAMA,SAAWC,SAASC,cAAc,cAExCF,SAASG,iBAAiB,SAAS,WACjC,IACMC,EADcH,SAASI,KAAKC,aAAa,SACZC,SAAS,cAAgBC,eAAiBC,cAC7EC,OAAOC,aAAaC,QAAQ,eAAgBR,MAG9C,IAAMS,mBAAqB,WACzB,QAAGH,OAAOC,aAAaG,QAAQ,kBAEd,cADOJ,OAAOC,aAAaG,QAAQ,gBACpBL,cAAgBD,gBACvC,IAMLO,uBAAyB,YACZL,OAAOM,WAAW,gCAAgCC,SACxDR,cACXC,OAAOM,WAAW,gCAAgCb,iBAAiB,UAAU,SAACe,GACxEL,uBACFK,EAAMD,SAAUR,kBAIhBU,qBAAuB,WAC3B,OAAON,sBAAwBE,0BAGjC,SAASP,eAGP,OAFAP,SAASI,KAAKe,UAAY,cAC1BpB,SAASoB,UAAUC,OAAO,SACnB,cAGT,SAASZ,cAIP,OAHAR,SAASI,KAAKe,UAAY,aAC1BnB,SAASI,KAAKe,UAAUE,IAAI,WAC5BtB,SAASoB,UAAY,QACd,aAGTD","file":"script.js","sourcesContent":["/*\r\nThe page is loaded with the theme based on the user's\r\nlast preference (stored in the local storage). This\r\nhave a higher precedence over the system \r\nprefers-color-scheme. In initial load, the default theme \r\nis the user's system preference.\r\n*/\r\nconst themeBtn = document.querySelector('#theme-btn');\r\n\r\nthemeBtn.addEventListener('click', () => {\r\n  const currentMode = document.body.getAttribute('class');\r\n  const userPreference = currentMode.includes('dark-theme') ? setLightMode() : setDarkMode();\r\n  window.localStorage.setItem('todoAppTheme', userPreference);\r\n});\r\n\r\nconst loadUserPreference = () => {\r\n  if(window.localStorage.getItem('todoAppTheme')){\r\n    const preferedTheme = window.localStorage.getItem('todoAppTheme');\r\n    preferedTheme=='dark-theme' ? setDarkMode() : setLightMode();\r\n    return true;\r\n  }else {\r\n    return false;\r\n  }\r\n};\r\n\r\nconst loadPrefersColorScheme = () => { \r\n  const darkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;\r\n  darkMode ? setDarkMode() : 'Application default: light mode';\r\n  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => { \r\n    if(!loadUserPreference())\r\n      event.matches ? setDarkMode() : 'setLightMode()';\r\n  });\r\n};\r\n\r\nconst loadThemePreferences = function(){\r\n  return loadUserPreference() || loadPrefersColorScheme();\r\n};\r\n\r\nfunction setLightMode(){\r\n  document.body.classList = 'light-theme';\r\n  themeBtn.classList.remove('night');\r\n  return 'light-theme';\r\n}\r\n\r\nfunction setDarkMode(){\r\n  document.body.classList = 'dark-theme';\r\n  document.body.classList.add('dark-bg');\r\n  themeBtn.classList = 'night';\r\n  return 'dark-theme';\r\n}\r\n\r\nloadThemePreferences();"]}